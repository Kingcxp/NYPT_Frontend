<!doctype html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PT TIMER</title>

    <link rel="stylesheet" type="text/css" href="css/default.css">

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.knob.js"></script>
    <script src="js/jquery.throttle.js"></script>
    <script src="js/jquery.classycountdown.js"></script>

    <link rel="stylesheet" type="text/css" href="css/jquery.classycountdown.css" />

    <style>
        .ClassyCountdownDemo {
            margin: 0 auto 30px auto;
            max-width: 800px;
            width: calc(100%);
            padding: 30px;
            display: block
        }
        button, input {
            width: 5%;
            height: 5.4%;
            position: absolute;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 8px;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.2);
            text-shadow: 0 0 12px rgba(255, 255, 255, 0.2);
            border: none;
        }
        input {
            padding-left: 16px;
        }
        input::placeholder {
            color: rgba(255, 255, 255, 0.5)
        }
        button:hover {
            cursor: pointer;
            color: #409eff;
            background-color: rgba(198, 226, 255, 0.2);
        }
    </style>
</head>

<body>
    <div id="countdown1" class="ClassyCountdownDemo"></div>
    <div id="output" style="width:1px; height:1px;position:absolute;left:10%;top:5%;font-size:78px;">
        J<br>S<br>Y<br>P<br>T
    </div>

    <input type="number" name="minutes" id="min" placeholder="分"
        style="top:65%;right:28%;" />
    <input type="number" name="seconds" id="sec" placeholder="秒"
        style="top:65%;right:20%;" />

    <button id="bt1" style="bottom:15%;left:20%;">选题环节</button>
    <button id="bt2" style="bottom:15%;left:25.2%;">正方准备</button>
    <button id="bt3" style="bottom:15%;left:30.4%;">正方报告</button>
    <button id="bt4" style="bottom:15%;left:35.6%;">反方提问</button>
    <button id="bt5" style="bottom:15%;left:40.8%;">反方准备</button>
    <button id="bt6" style="bottom:15%;left:46%;">反方报告</button>
    <button id="bt7" style="bottom:15%;left:51.2%;">正反方讨论</button>
    <button id="bt8" style="bottom:5%;left:20%;">评论方提问</button>
    <button id="bt9" style="bottom:5%;left:25.2%;">评论方准备</button>
    <button id="bt10" style="bottom:5%;left:30.4%;">评论方报告</button>
    <button id="bt11" style="bottom:5%;left:35.6%;">正方总结</button>
    <button id="bt12" style="bottom:5%;left:40.8%;">评分</button>
    <button id="bt13" style="bottom:5%;left:46%;">裁判点评</button>

    <button id="start" style="top:72%;right:28%;">启动</button>
    <button id="pause" style="top:72%;right:20%;">暂停</button>
    <button id="recover" style="top:80%;right:28%;">恢复</button>
    <button id="next" style="top:80%;right:20%;">下一个环节</button>
    <audio src="song.mp3" id="audio"></audio>


    <script type="text/javascript">


        let time = 0
        let time1 = 0
        let totaltime = 1
        let backuptime = 0
        let recovertime
        let flag = 0
        let interval
        let items = true
        let num = 0

        function single() {
            $('#countdown1').ClassyCountdown({
                theme: "theme1",
                end: time
            }, flag, totaltime)
            time--;
            backuptime = time;
            if (num == 6) { time1 = time }

            if (time < 0 && time > -2) {
                document.getElementById('audio').play();
            }
        };
        single()

        $(document).ready(function () {

            $("#bt1").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                time = 1 * 60;
                totaltime = time;
                num = 1;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "选题环节";
            });

            $("#bt2").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                time = 1 * 60;
                totaltime = time;
                num = 2;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "正方准备";
            });
            $("#bt3").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                time = 12 * 60;
                totaltime = time;
                num = 3;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "正方报告";
            });
            $("#bt4").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                time = 3 * 60;
                num = 4;
                totaltime = time;

                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "反方提问";
            });
            $("#bt5").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                time = 2 * 60;
                totaltime = time;
                num = 5;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "反方准备";
            });
            $("#bt6").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                time = 3 * 60;
                totaltime = time;
                num = 6;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "反方报告";
            });
            $("#bt7").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                if (time1 > 0) { time = time1 + 600 }
                else { time = 10 * 60; }
                totaltime = time;
                time1 = 0;
                num = 7;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "正反方讨论";
            });

            $("#bt8").click(function () {
                recovertime = backuptime
                recover_num = num
                items = true
                clearInterval(interval);
                time = 3 * 60;
                totaltime = time;
                num = 8;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "评论方提问";
            });
            $("#bt9").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                num = 9;
                time = 2 * 60;
                totaltime = time;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "评论方准备";
            });
            $("#bt10").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                num = 10;
                time = 3 * 60;
                totaltime = time;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "评论方报告";
            });
            $("#bt11").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                num = 11;
                time = 1 * 60;
                totaltime = time;

                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "正方总结";
            });

            $("#bt12").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                time = 2 * 60;
                totaltime = time;
                num = 12;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "<br/>评 分 ";
            });
            $("#bt13").click(function () {
                items = true
                recovertime = backuptime
                recover_num = num
                clearInterval(interval);
                time = 5 * 60;
                totaltime = time;
                num = 13;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "裁判点评";
            });
            $("#recover").click(function () {
                items = true
                num = recover_num
                clearInterval(interval);
                time = recovertime;
                totaltime = time;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);

                switch (recover_num) {
                    case 1:
                        document.getElementById("output").innerHTML = "选题环节";
                        break;
                    case 2:
                        document.getElementById("output").innerHTML = "正方准备";
                        break;
                    case 3:
                        document.getElementById("output").innerHTML = "正方报告";
                        break;
                    case 4:
                        document.getElementById("output").innerHTML = "反方提问";
                        break;
                    case 5:
                        document.getElementById("output").innerHTML = "反方准备";
                        break;
                    case 6:
                        document.getElementById("output").innerHTML = "反方报告";
                        break;
                    case 7:
                        document.getElementById("output").innerHTML = "正反方讨论";
                        break;
                    case 8:
                        document.getElementById("output").innerHTML = "评论方提问";
                        break;
                    case 9:
                        document.getElementById("output").innerHTML = "评论方准备";
                        break;
                    case 10:
                        document.getElementById("output").innerHTML = "评论方报告";
                        break;
                    case 11:
                        document.getElementById("output").innerHTML = "正方总结";
                        break;
                    case 12:
                        document.getElementById("output").innerHTML = "<br/>评 分 ";
                        break;
                    case 13:
                        document.getElementById("output").innerHTML = "裁判点评";
                        break;
                }
            });

            $("#start").click(function () {
                items = true
                clearInterval(interval);
                time = $("#min").val() * 60 + $("#sec").val() * 1;
                totaltime = time;
                flag = 1;
                single()
                flag = 2;
                interval = setInterval('single()', 1000);
                document.getElementById("output").innerHTML = "手动模式";
            });
            $("#pause").click(function () {

                if (items) {
                    clearInterval(interval);
                    items = !items
                    pause.innerHTML = "continue"
                }
                else {
                    interval = setInterval('single()', 1000);
                    items = !items
                    pause.innerHTML = "pause"
                }

            });
            $("#next").click(function () {

                num1 = num + 1;
                if (num1 > 13) { num1 -= 13 }
                str = "bt" + num1.toString() + ".click()";
                eval(str)
            });

            window.onload = function () {
                window.onkeypress = function (e) {
                    // alert(e.key)//弹出按键对应的字母
                    // alert(e.keyCode)
                    if (e.charCode == 122) {
                        next.click()
                    }
                }
            }

        });

    </script>
</body>

</html>